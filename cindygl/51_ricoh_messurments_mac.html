
<!DOCTYPE html>
<html>

<head>
<title>Webcam in Cindy JS</title>
<meta charset="UTF-8">
<script type="text/javascript" src="Cindy.js"></script>
<script type="text/javascript" src="CindyGL.js"></script>
<script id="csinit" type="text/x-cindyscript">
video = camera video();
</script>
<script id="csdraw" type="text/x-cindyscript">
if (image ready(video),
  //draw image (A, B, video);
  
  
  fac = 0.281;
  colorplot(
    if(#.y>0.8,
      
      imagergba([-1,-.5], [1,-.5], video, #)
      ,
      
      
    lambda = (#.x+pi/2)*2;
    phi = #.y*2;
    
    basis = if(phi>0,(-.5,.0), (.5,.0));
    lambda = if(phi>0, lambda, pi-lambda);
    tar = basis + (cos(lambda), sin(lambda))*(pi/2-|phi|)*fac;
    
    imagergba([-1,-.5], [1,-.5], video, tar)
    )
    
  );
  
  /*
  colorplot(
    imagergba([-1,-720/1280], [1,-720/1280], video, #)
  );*/
);


draw(circle(A,.48));
errc(A.xy);
errc(fac);
</script>
<script type="text/javascript">
var cdy = CindyJS({
  ports: [{id: "CSCanvas", transform:[{visibleRect:[-1,-1,1,1]}]}],
  scripts: "cs*",
  language: "en",
  defaultAppearance: {
  },
  geometry: [
    {name:"A", type:"Free", pos:[0,0], visible:true},
  ],
  use: ["CindyGL"]
});
</script>
</head>

<body style="font-family:Arial;">
  <div id="CSCanvas" style="width:800px; height:800px; border:2px solid black"></div>
</body>

</html>
